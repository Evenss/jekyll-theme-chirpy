<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Ai Memory" />
<meta property="og:locale" content="en" />
<meta name="description" content="Introduction to Memory Agent Architecture" />
<meta property="og:description" content="Introduction to Memory Agent Architecture" />
<link rel="canonical" href="https://evenss.github.io/posts/ai-memory/" />
<meta property="og:url" content="https://evenss.github.io/posts/ai-memory/" />
<meta property="og:site_name" content="Evenss AI Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-18T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Ai Memory" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-18T00:00:00+08:00","datePublished":"2025-11-18T00:00:00+08:00","description":"Introduction to Memory Agent Architecture","headline":"Ai Memory","mainEntityOfPage":{"@type":"WebPage","@id":"https://evenss.github.io/posts/ai-memory/"},"url":"https://evenss.github.io/posts/ai-memory/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Ai Memory | Evenss AI Blog
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">



  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="https://chirpy-img.netlify.app/commons/avatar.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">Evenss AI Blog</a>
    <p class="site-subtitle fst-italic mb-0"></p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    

      
        <a
          href="https://github.com/Evenss"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    

      
        <a
          href="javascript:location.href = 'mailto:' + ['lyhevenss','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
          
        

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Ai Memory</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>Ai Memory</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1763395200"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Nov 18, 2025
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/evenss">oneLineEven</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2124 words"
>
  <em>11 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">Ai Memory</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">Ai Memory</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <h1 id="introduction-to-memory">Introduction to Memory</h1>
<h2 id="agent-architecture"><span class="me-2">Agent Architecture</span><a href="#agent-architecture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p><a href="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1762676410529-58151223-212e-4f18-8fa9-d3de6788c8f9.png" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1762676410529-58151223-212e-4f18-8fa9-d3de6788c8f9.png" alt="" loading="lazy"></a></p>

<p>(From The Rise and Potential of Large Language Model Based Agents: A Survey):</p>

<ol>
  <li>Perception: Information input.</li>
  <li>Brain-Decision Making: Autonomous decision-making and planning, executing more complex tasks.</li>
  <li>Brain-Memory &amp; Knowledge: Memory capability, storing Agentâ€™s knowledge and skills.</li>
  <li>Action: Interacting with the external world, enabling Agents to autonomously complete more complex tasks through actions and perception.</li>
</ol>

<h2 id="the-role-of-memory-for-agents"><span class="me-2">The Role of Memory for Agents</span><a href="#the-role-of-memory-for-agents" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<ol>
  <li>
    <font style="color:rgb(37, 39, 42);">Enable Agents to have continuous learning capabilities</font>
    <ul>
      <li>
        <font style="color:rgb(37, 39, 42);">Summarize experiences from past interactions and learn from mistakes to improve task performance.</font>
      </li>
    </ul>
  </li>
  <li>
    <font style="color:rgb(37, 39, 42);">Enable Agents to maintain conversational coherence and action consistency:</font>
    <ul>
      <li>
        <font style="color:rgb(37, 39, 42);">Possess longer-range context management capabilities, maintaining consistent context in long conversations to ensure coherence.</font>
      </li>
      <li>
        <font style="color:rgb(37, 39, 42);">Avoid establishing facts that contradict previous ones, maintaining action consistency.</font>
      </li>
    </ul>
  </li>
  <li>
    <font style="color:rgb(37, 39, 42);">Enable Agents to provide personalized services and user experiences</font>
  </li>
</ol>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1762676911596-f89ff7b9-3e1a-4413-a473-c6dd62122a8c.png" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1762676911596-f89ff7b9-3e1a-4413-a473-c6dd62122a8c.png" alt="" loading="lazy"></a></p>

<h1 id="memory-vs-rag">Memory VS RAG</h1>
<ul>
  <li><strong><font style="color:rgb(17, 17, 51);">AI Memory</font></strong><font style="color:rgb(17, 17, 51);"> is more like the model's "personal experience" or "conversation history", focusing on</font><strong><font style="color:rgb(17, 17, 51);"> continuity of internal state and personalization</font></strong><font style="color:rgb(17, 17, 51);">.</font></li>
  <li><strong><font style="color:rgb(17, 17, 51);">RAG</font></strong><font style="color:rgb(17, 17, 51);"> </font><font style="color:rgb(17, 17, 51);">is like equipping the model with a "real-time reference library", focusing on</font><strong><font style="color:rgb(17, 17, 51);"> obtaining external, authoritative, and up-to-date information</font></strong><font style="color:rgb(17, 17, 51);"> to improve answer accuracy and reliability.</font></li>
</ul>

<font style="color:rgb(17, 17, 51);">Simply put, you can think of AI Memory as the model "remembering" what it has discussed with you, while RAG is the model "looking up information" when answering your questions to ensure correctness. An intelligent AI assistant will likely use both capabilities simultaneously.</font>

<h1 id="memory-implementation">Memory Implementation</h1>
<h2 id="mem0"><span class="me-2">Mem0</span><a href="#mem0" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p><a href="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1758008181340-7a31ba73-2ef0-43b0-9546-7726281b4aa4.png" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1758008181340-7a31ba73-2ef0-43b0-9546-7726281b4aa4.png" alt="" loading="lazy"></a></p>

<h3 id="components"><span class="me-2"><font style="color:rgb(65, 65, 69);">Components</font></span><a href="#components" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul>
  <li>
    <font style="color:rgb(65, 65, 69);">LLM (OpenAI, Ollama, Azure OpenAI, Gemini, DeepSeek, and 18 other types)
</font>
  </li>
  <li>
    <font style="color:rgb(65, 65, 69);">Vector databases</font>
    <p>(Qdrant, Chroma, Pgvector, Milvus, and 19 other types)</p>
  </li>
  <li>
    <font style="color:rgb(65, 65, 69);">Graph databases</font>
    <p>(Neo4j, Memgraph, Neptune Analytics, Kuzu)</p>
  </li>
  <li>
    <font style="color:rgb(65, 65, 69);">Embedding models</font>
    <p>(OpenAI, Azure OpenAI, Ollama, and 10 other types)</p>
  </li>
</ul>

<h3 id="architecture"><span class="me-2"><font style="color:rgb(65, 65, 69);">Architecture</font></span><a href="#architecture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul>
  <li>
    <font style="color:rgb(65, 65, 69);">API interface layer</font>
  </li>
  <li>
    <font style="color:rgb(65, 65, 69);">Intelligent processing layer: LLM reasoning + fact extraction + conflict resolution</font>
    <ul>
      <li>Fact extraction: Using custom prompts to extract key information from conversations</li>
      <li>Conflict resolution: Intelligently determining ADD/UPDATE/DELETE/NONE operations</li>
      <li>Memory optimization: Avoiding redundancy, keeping information up-to-date</li>
    </ul>
  </li>
  <li>
    <font style="color:rgb(65, 65, 69);">Dual storage architecture: Vector database + Graph database</font>
  </li>
  <li>
    <font style="color:rgb(65, 65, 69);">Factory layer: LLM/Embedder/VectorStore Factory</font>
  </li>
</ul>

<h3 id="process"><span class="me-2"><font style="color:rgb(65, 65, 69);">Process</font></span><a href="#process" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p><strong>Main Process</strong></p>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/c7e974749183b4f7f08d49a828b4a811.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/c7e974749183b4f7f08d49a828b4a811.svg" alt="" loading="lazy"></a></p>

<p><strong><font style="color:rgb(65, 65, 69);">Retrieval Process</font></strong></p>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/24193f5daddd60d9872b360f73b5fa8d.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/24193f5daddd60d9872b360f73b5fa8d.svg" alt="" loading="lazy"></a></p>

<h3 id="source-code-analysis"><span class="me-2">Source Code Analysis</span><a href="#source-code-analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="c1"># mem0's concurrent dual-path retrieval implementation
</span><span class="k">with</span> <span class="n">concurrent</span><span class="p">.</span><span class="n">futures</span><span class="p">.</span><span class="nc">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
    <span class="c1"># Path 1: Vector database semantic search
</span>    <span class="n">future_memories</span> <span class="o">=</span> <span class="n">executor</span><span class="p">.</span><span class="nf">submit</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_search_vector_store</span><span class="p">,</span> <span class="p">...)</span>

    <span class="c1"># Path 2: Graph database relationship search  
</span>    <span class="n">future_graph_entities</span> <span class="o">=</span> <span class="n">executor</span><span class="p">.</span><span class="nf">submit</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">.</span><span class="n">search</span><span class="p">,</span> <span class="p">...)</span>

    <span class="c1"># Get results
</span>    <span class="n">vector_memories</span> <span class="o">=</span> <span class="n">future_memories</span><span class="p">.</span><span class="nf">result</span><span class="p">()</span>     <span class="c1"># Retrieval results
</span>    <span class="n">graph_relations</span> <span class="o">=</span> <span class="n">future_graph_entities</span><span class="p">.</span><span class="nf">result</span><span class="p">()</span>  <span class="c1"># Graph path entity relationship results 
</span>
<span class="c1"># Return separately
</span><span class="k">return</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">results</span><span class="sh">"</span><span class="p">:</span> <span class="n">vector_memories</span><span class="p">,</span>    <span class="c1"># Vector path results
</span>    <span class="sh">"</span><span class="s">relations</span><span class="sh">"</span><span class="p">:</span> <span class="n">graph_relations</span>   <span class="c1"># Graph path entity relationship results 
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">search</span><span class="p">(</span>
    <span class="n">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">vectors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">filters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OutputData</span><span class="p">]:</span>
    
    <span class="bp">...</span>
    
    <span class="c1"># Filter conditions
</span>    <span class="k">if</span> <span class="n">filters</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">filters</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
            <span class="n">filter_conditions</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="sh">"</span><span class="s">payload-&gt;&gt;%s = %s</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">filter_params</span><span class="p">.</span><span class="nf">extend</span><span class="p">([</span><span class="n">k</span><span class="p">,</span> <span class="nf">str</span><span class="p">(</span><span class="n">v</span><span class="p">)])</span>
    <span class="n">filter_clause</span> <span class="o">=</span> <span class="sh">"</span><span class="s">WHERE </span><span class="sh">"</span> <span class="o">+</span> <span class="sh">"</span><span class="s"> AND </span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">filter_conditions</span><span class="p">)</span> <span class="k">if</span> <span class="n">filter_conditions</span> <span class="k">else</span> <span class="sh">""</span>

    <span class="c1"># Execute SQL: scalar + vector
</span>    <span class="k">with</span> <span class="n">self</span><span class="p">.</span><span class="nf">_get_cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="sh">"""</span><span class="s">
            SELECT id, vector &lt;=&gt; %s::vector AS distance, payload
            FROM </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s">
            </span><span class="si">{</span><span class="n">filter_clause</span><span class="si">}</span><span class="s">
            ORDER BY distance
            LIMIT %s
            </span><span class="sh">"""</span><span class="p">,</span>
            <span class="p">(</span><span class="n">vectors</span><span class="p">,</span> <span class="o">*</span><span class="n">filter_params</span><span class="p">,</span> <span class="n">limit</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="nf">fetchall</span><span class="p">()</span>
    <span class="bp">...</span>
</pre></td></tr></tbody></table></code></div></div>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="bp">...</span>

    <span class="c1"># Step 1: LLM extracts entities
</span>    <span class="n">entity_type_map</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_retrieve_nodes_from_data</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>
    <span class="c1"># Step 2: Graph search for related entities and relationships
</span>    <span class="n">search_output</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_search_graph_db</span><span class="p">(</span><span class="n">node_list</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">entity_type_map</span><span class="p">.</span><span class="nf">keys</span><span class="p">()),</span> <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>

    <span class="bp">...</span>
    
    <span class="c1"># Step 3: BM25 reranks search results
</span>    <span class="n">bm25</span> <span class="o">=</span> <span class="nc">BM25Okapi</span><span class="p">(</span><span class="n">search_outputs_sequence</span><span class="p">)</span>

    <span class="n">tokenized_query</span> <span class="o">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="n">reranked_results</span> <span class="o">=</span> <span class="n">bm25</span><span class="p">.</span><span class="nf">get_top_n</span><span class="p">(</span><span class="n">tokenized_query</span><span class="p">,</span> <span class="n">search_outputs_sequence</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="bp">...</span>

<span class="c1"># Implementation of _search_graph_db graph search
</span><span class="k">def</span> <span class="nf">_search_graph_db</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">node_list</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    
    <span class="c1"># Filter conditions
</span>    <span class="bp">...</span>
    <span class="n">node_props_str</span> <span class="o">=</span> <span class="bp">...</span>
    
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">node_list</span><span class="p">:</span>
        <span class="n">n_embedding</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">embedding_model</span><span class="p">.</span><span class="nf">embed</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    
        <span class="c1"># Node retrieval based on vector similarity
</span>        <span class="n">cypher_query</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"""</span><span class="s">
        -------Match candidate nodes-------
        ---self.node_label = </span><span class="sh">"</span><span class="s">:`__Entity__`</span><span class="sh">"</span><span class="s"> if self.config.graph_store.config.base_label else </span><span class="sh">""</span><span class="s">
        MATCH (n </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">node_label</span><span class="si">}</span><span class="s"> })
        WHERE n.embedding IS NOT NULL
        -------Calculate cosine similarity-------
        WITH n, round(2 * vector.similarity.cosine(n.embedding, $n_embedding) - 1, 4) AS similarity
        WHERE similarity &gt;= $threshold
        -------Find outgoing and incoming edges-------
        CALL 
            WITH n
            MATCH (n)-[r]-&gt;(m </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">node_label</span><span class="si">}</span><span class="s"> })
            RETURN n.name AS source, elementId(n) AS source_id, type(r) AS relationship, elementId(r) AS relation_id, m.name AS destination, elementId(m) AS destination_id
            UNION
            WITH n  
            MATCH (n)&lt;-[r]-(m </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">node_label</span><span class="si">}</span><span class="s"> })
            RETURN m.name AS source, elementId(m) AS source_id, type(r) AS relationship, elementId(r) AS relation_id, n.name AS destination, elementId(n) AS destination_id
        
        WITH distinct source, source_id, relationship, relation_id, destination, destination_id, similarity
        RETURN source, source_id, relationship, relation_id, destination, destination_id, similarity
        ORDER BY similarity DESC
        LIMIT $limit
        </span><span class="sh">"""</span>
    
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">"</span><span class="s">n_embedding</span><span class="sh">"</span><span class="p">:</span> <span class="n">n_embedding</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">threshold</span><span class="sh">"</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">threshold</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">user_id</span><span class="sh">"</span><span class="p">:</span> <span class="n">filters</span><span class="p">[</span><span class="sh">"</span><span class="s">user_id</span><span class="sh">"</span><span class="p">],</span>
            <span class="sh">"</span><span class="s">limit</span><span class="sh">"</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
        <span class="p">}</span>
        
        <span class="bp">...</span>
        
        <span class="n">ans</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">.</span><span class="nf">query</span><span class="p">(</span><span class="n">cypher_query</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">result_relations</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">result_relations</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="powermem"><span class="me-2"><font style="color:rgb(62, 62, 62);">ðŸŒŸPowerMemðŸŒŸ</font></span><a href="#powermem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>GitHub: <a href="https://github.com/alibaba/PowerMem">https://github.com/oceanbase/PowerMem</a></p>
<h3 id="performance-improvements"><span class="me-2">Performance Improvements</span><a href="#performance-improvements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<h4 id="multi-path-retrievalhybrid-search"><span class="me-2">Multi-path Retrieval/Hybrid Search</span><a href="#multi-path-retrievalhybrid-search" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p><strong>Flow Diagram</strong></p>

<ul>
  <li>Full-text + Vector + Scalar
    <ul>
      <li>Version 441 and above can directly use kernel hybrid search</li>
    </ul>
  </li>
  <li>Fusion coarse ranking (RRF) + Fine ranking (Rerank model)
    <ul>
      <li>Rerank can improve accuracy by ~6%</li>
    </ul>
  </li>
</ul>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/0419ae711535f7dd9b2920933a467a26.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/0419ae711535f7dd9b2920933a467a26.svg" alt="" loading="lazy"></a></p>

<p><strong>Source Code Analysis:</strong></p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">_hybrid_search</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vectors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="n">fusion_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sh">"</span><span class="s">rrf</span><span class="sh">"</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">):</span>

    <span class="c1"># Expand single-path limit by 3x
</span>    <span class="n">candidate_limit</span> <span class="o">=</span> <span class="n">limit</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">reranker</span> <span class="k">else</span> <span class="n">limit</span>

    <span class="c1"># Step 1: Query separately
</span>    <span class="k">with</span> <span class="nc">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="c1"># Vector
</span>        <span class="n">vector_future</span> <span class="o">=</span> <span class="n">executor</span><span class="p">.</span><span class="nf">submit</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_vector_search</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">vectors</span><span class="p">,</span> <span class="n">candidate_limit</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>
        <span class="c1"># Full-text
</span>        <span class="n">fts_future</span> <span class="o">=</span> <span class="n">executor</span><span class="p">.</span><span class="nf">submit</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_fulltext_search</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">candidate_limit</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>

        <span class="n">vector_results</span> <span class="o">=</span> <span class="n">vector_future</span><span class="p">.</span><span class="nf">result</span><span class="p">()</span>
        <span class="n">fts_results</span> <span class="o">=</span> <span class="n">fts_future</span><span class="p">.</span><span class="nf">result</span><span class="p">()</span>

    <span class="c1"># Step 2: Fuse results for coarse ranking, limit results to 3 * limit
</span>    <span class="n">coarse_ranked_results</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_combine_search_results</span><span class="p">(</span>
        <span class="n">vector_results</span><span class="p">,</span> <span class="n">fts_results</span><span class="p">,</span> <span class="n">candidate_limit</span><span class="p">,</span> <span class="n">fusion_method</span><span class="p">,</span> <span class="n">k</span>
    <span class="p">)</span>

    
    <span class="c1"># Step 3: Fine ranking (using qwen3-rerank model), limit results to limit
</span>    <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">reranker</span> <span class="ow">and</span> <span class="n">query</span> <span class="ow">and</span> <span class="n">coarse_ranked_results</span><span class="p">:</span>
        <span class="n">final_results</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_apply_rerank</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">coarse_ranked_results</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">final_results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">coarse_ranked_results</span><span class="p">[:</span><span class="n">limit</span><span class="p">]</span>

<span class="c1"># rerank
</span><span class="k">def</span> <span class="nf">_apply_rerank</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">candidates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OutputData</span><span class="p">],</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OutputData</span><span class="p">]:</span>
    
    <span class="bp">...</span>

    <span class="c1"># Call reranker to get reranked indices and scores
</span>    <span class="n">reranked_indices</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">reranker</span><span class="p">.</span><span class="nf">rerank</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">documents</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    
    <span class="bp">...</span>
    
    <span class="c1"># Special handling: high-scoring items at head and tail, because LLMs have recency effect
</span>    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">final_results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">reordered</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="nf">len</span><span class="p">(</span><span class="n">final_results</span><span class="p">)</span>
        <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">right</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">final_results</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">final_results</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Even indices go to the left side
</span>                <span class="n">reordered</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
                <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Odd indices go to the right side
</span>                <span class="n">reordered</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
                <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
        
        <span class="n">final_results</span> <span class="o">=</span> <span class="n">reordered</span>

    <span class="k">return</span> <span class="n">final_results</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong><font style="color:rgb(13, 18, 57);">Recency Effect</font></strong> Source:</p>

<blockquote>
  <ul>
    <li><strong><font style="color:rgb(13, 18, 57);">Paper Title</font></strong><font style="color:rgb(13, 18, 57);">: </font><strong><font style="color:rgb(13, 18, 57);">Lost in the Middle: How Language Models Use Long Contexts</font></strong></li>
    <li><strong><font style="color:rgb(13, 18, 57);">Authors</font></strong><font style="color:rgb(13, 18, 57);">: Nelson F. Liu, Kevin Lin, John Hewitt, Ashwin Paranjape, Michele Catasta, Percy Liang</font></li>
    <li><strong><font style="color:rgb(13, 18, 57);">Published</font></strong><font style="color:rgb(13, 18, 57);">: 2023</font></li>
    <li><strong><font style="color:rgb(13, 18, 57);">Link</font></strong><font style="color:rgb(13, 18, 57);">: </font><a href="https://arxiv.org/abs/2307.03172"><font style="color:rgb(94, 92, 230);">https://arxiv.org/abs/2307.03172</font></a></li>
  </ul>

</blockquote>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1763013612851-0744a233-95ee-42c7-981c-3da69854f525.png" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/121056529/1763013612851-0744a233-95ee-42c7-981c-3da69854f525.png" alt="" loading="lazy"></a></p>

<p><strong><font style="color:rgb(13, 18, 57);">U-shaped Performance Curve</font></strong><font style="color:rgb(13, 18, 57);">: The core finding of the paper is that when models need to retrieve information from long input texts (long contexts), their performance shows a clear "U-shaped" curve.</font></p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>- &lt;font style="color:rgb(13, 18, 57);"&gt;Information located at the&lt;/font&gt;**&lt;font style="color:rgb(13, 18, 57);"&gt; beginning (Primacy) and end (Recency)&lt;/font&gt;**&lt;font style="color:rgb(13, 18, 57);"&gt; of the input sequence can be most accurately recalled and used by the model.&lt;/font&gt;
- &lt;font style="color:rgb(13, 18, 57);"&gt;Information located in the&lt;/font&gt;**&lt;font style="color:rgb(13, 18, 57);"&gt; middle&lt;/font&gt;**&lt;font style="color:rgb(13, 18, 57);"&gt; of the input sequence shows significantly decreased accuracy in recall and usage, as if "lost in the middle".&lt;/font&gt;
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Paper Conclusions</strong></p>

<ul>
  <li><strong><font style="color:rgb(13, 18, 57);">Why must System Prompt be at the front?</font></strong><font style="color:rgb(13, 18, 57);"> </font><font style="color:rgb(13, 18, 57);">Because it needs to leverage the</font><font style="color:rgb(13, 18, 57);"> </font><strong><font style="color:rgb(13, 18, 57);">Primacy Effect</font></strong><font style="color:rgb(13, 18, 57);">. System instructions, role definitions, and core rules are global and must be firmly remembered by the model as the foundation of the entire conversation. Placing them at the beginning ensures they receive the highest attention weights.</font></li>
  <li><strong><font style="color:rgb(13, 18, 57);">Why must User Input be at the end?</font></strong><font style="color:rgb(13, 18, 57);"> Because it needs to leverage the </font><strong><font style="color:rgb(13, 18, 57);">Recency Effect</font></strong><font style="color:rgb(13, 18, 57);">. The user's specific question is the instruction that the model needs to respond to immediately. Placing it at the end ensures it becomes the focus of the model's attention, directly driving the generation process.</font></li>
</ul>

<h4 id="data-layering"><span class="me-2">Data Layering</span><a href="#data-layering" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p><strong>Purpose:</strong></p>

<p>Use different vector dimensions and different index types for different data, layering the underlying data, achieving the most reasonable and efficient utilization through <strong>sub-table storage + intelligent routing</strong>. For example, main table 1536 dimensions, working memory table 512 dimensions, archive table 256 dimensions</p>

<p><strong>Core Implementation Logic:</strong></p>

<p>Use metadata (JSON) in database table fields to route and distribute based on different filters</p>

<p><strong>Prerequisites:</strong></p>

<p>Sub-table data and main table data <strong>have no intersection</strong>. For example, sub-table is shared memory, main table is private memory. When querying with type=XX, only one table will be queried</p>

<p><strong>Routing Flow Diagram</strong></p>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/e14e73aaed11c6f4f856f93529ea1677.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/e14e73aaed11c6f4f856f93529ea1677.svg" alt="" loading="lazy"></a></p>

<h4 id="ob-graph-implementation"><span class="me-2">OB Graph Implementation</span><a href="#ob-graph-implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p>Graph databases are generally designed to solve <font style="color:rgb(13, 18, 57);">querying large amounts of data with</font><strong><font style="color:rgb(13, 18, 57);"> complex relationships</font></strong>, such as blockchain and decentralized applications. However, in RAG and memory retrieval environments, multi-hop requirements are often limited, and the amount of relationship data between entities is predictable. Therefore, relational databases can achieve the same purpose.</p>

<p><strong>Table Structure</strong></p>

<pre><code class="language-plain">graph_entitiesã€Entitiesã€‘
â”œâ”€â”€ id (Primary Key)
â”œâ”€â”€ name (Entity Name)
â”œâ”€â”€ entity_type (Entity Type)
â”œâ”€â”€ embedding (Vector Embedding)
â”œâ”€â”€ created_at (Created At)
â””â”€â”€ updated_at (Updated At)


graph_relationshipsã€Relationshipsã€‘
â”œâ”€â”€ id (Primary Key)
â”œâ”€â”€ source_entity_id (Source Entity ID)
â”œâ”€â”€ destination_entity_id (Destination Entity ID)
â”œâ”€â”€ relationship_type (Relationship Type)
â”œâ”€â”€ user_id (User ID)
â”œâ”€â”€ agent_id (Agent ID)
â”œâ”€â”€ run_id (Run ID)
â”œâ”€â”€ created_at (Created At)
â””â”€â”€ updated_at (Updated At)
</code></pre>

<p><strong>Multi-hop Search</strong></p>

<div class="language-plsql highlighter-rouge"><div class="code-header">
        <span data-label-text="Plsql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="c1">-- Hop 1</span>
<span class="kr">SELECT</span>
    <span class="o">..</span><span class="p">.</span>
<span class="kr">FROM</span>
    <span class="p">(</span>
    <span class="kr">SELECT</span>
        <span class="o">..</span><span class="p">.</span>
    <span class="kr">FROM</span> <span class="err">{</span><span class="k">self</span><span class="p">.</span><span class="n">relationship_table</span><span class="err">}</span>
    <span class="kr">WHERE</span>
        <span class="n">source_entity_id</span> <span class="ow">IN</span> <span class="p">(</span><span class="o">'</span><span class="s1">alice_uuid</span><span class="o">'</span><span class="p">,</span> <span class="o">'</span><span class="s1">bob_uuid</span><span class="o">'</span><span class="p">)</span>  <span class="c1">-- Seed entities</span>
        <span class="ow">AND</span> <span class="n">r</span><span class="p">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="o">'</span><span class="s1">user123</span><span class="o">'</span>
    <span class="kr">ORDER</span> <span class="kr">BY</span> <span class="n">mentions</span> <span class="kr">DESC</span><span class="p">,</span> <span class="n">created_at</span> <span class="kr">DESC</span>
    <span class="k">LIMIT</span> <span class="mi">1000</span>
<span class="p">)</span> <span class="kr">AS</span> <span class="n">r</span>
<span class="k">JOIN</span> <span class="err">{</span><span class="k">self</span><span class="p">.</span><span class="n">entity_table</span><span class="err">}</span> <span class="n">e1</span> <span class="kr">ON</span> <span class="n">r</span><span class="p">.</span><span class="n">source_entity_id</span> <span class="o">=</span> <span class="n">e1</span><span class="p">.</span><span class="n">id</span>
<span class="k">JOIN</span> <span class="err">{</span><span class="k">self</span><span class="p">.</span><span class="n">entity_table</span><span class="err">}</span> <span class="n">e2</span> <span class="kr">ON</span> <span class="n">r</span><span class="p">.</span><span class="n">destination_entity_id</span> <span class="o">=</span> <span class="n">e2</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="c1">-- Hop 2</span>
<span class="c1">-- Structure is identical, only parameters differ</span>
<span class="kr">SELECT</span>
    <span class="o">..</span><span class="p">.</span>
<span class="kr">FROM</span>
    <span class="p">(</span>
    <span class="kr">SELECT</span>
        <span class="o">..</span><span class="p">.</span>
    <span class="kr">FROM</span> <span class="err">{</span><span class="k">self</span><span class="p">.</span><span class="n">relationship_table</span><span class="err">}</span>
    <span class="kr">WHERE</span>
        <span class="n">source_entity_id</span> <span class="ow">IN</span> <span class="p">(</span><span class="o">'</span><span class="s1">openai_uuid</span><span class="o">'</span><span class="p">,</span> <span class="o">'</span><span class="s1">sf_uuid</span><span class="o">'</span><span class="p">,</span> <span class="o">'</span><span class="s1">charlie_uuid</span><span class="o">'</span><span class="p">,</span> <span class="o">..</span><span class="p">.)</span>  <span class="c1">-- Hop 1's destination_id</span>
        <span class="ow">AND</span> <span class="n">r</span><span class="p">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="o">'</span><span class="s1">user123</span><span class="o">'</span>
    <span class="kr">ORDER</span> <span class="kr">BY</span> <span class="n">mentions</span> <span class="kr">DESC</span><span class="p">,</span> <span class="n">created_at</span> <span class="kr">DESC</span>
    <span class="k">LIMIT</span> <span class="mi">1000</span>
<span class="p">)</span> <span class="kr">AS</span> <span class="n">r</span>
<span class="k">JOIN</span> <span class="err">{</span><span class="k">self</span><span class="p">.</span><span class="n">entity_table</span><span class="err">}</span> <span class="n">e1</span> <span class="kr">ON</span> <span class="n">r</span><span class="p">.</span><span class="n">source_entity_id</span> <span class="o">=</span> <span class="n">e1</span><span class="p">.</span><span class="n">id</span>
<span class="k">JOIN</span> <span class="err">{</span><span class="k">self</span><span class="p">.</span><span class="n">entity_table</span><span class="err">}</span> <span class="n">e2</span> <span class="kr">ON</span> <span class="n">r</span><span class="p">.</span><span class="n">destination_entity_id</span> <span class="o">=</span> <span class="n">e2</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="c1">-- Hop 3</span>
<span class="c1">-- Structure is identical, only parameters differ</span>
<span class="o">....</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/3597d193def6ef4e703bb0805a9c2f25.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/3597d193def6ef4e703bb0805a9c2f25.svg" alt="" loading="lazy"></a></p>

<p><strong>Example</strong></p>

<pre><code class="language-plain">Initial: current_sources = ['alice_uuid', 'bob_uuid']

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hop 1: SQL-1                       	â”‚
â”‚  IN ('alice_uuid', 'bob_uuid')      â”‚
â”‚  Returns: 30 relationships         	â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ Application layer loop prevention filtering
           â”œâ”€ Accumulated results: 30
           â”œâ”€ Check: 30 &lt; 100, continue
           â”‚
           â””â”€ Extract destination_id as next hop starting point
              current_sources = ['openai_uuid', 'sf_uuid', ...]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hop 2: SQL-2                       	â”‚
â”‚  IN ('openai_uuid', 'sf_uuid', ...) â”‚
â”‚  Returns: 45 relationships          	â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ Application layer loop prevention filtering (filter out 5 duplicate edges)
           â”œâ”€ Accumulated results: 30 + 40 = 70
           â”œâ”€ Check: 70 &lt; 100, continue
           â”‚
           â””â”€ Extract destination_id as next hop starting point
              current_sources = ['sam_uuid', 'ca_uuid', ...]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hop 3: SQL-3                       	â”‚
â”‚  IN ('sam_uuid', 'ca_uuid', ...)    â”‚
â”‚  Returns: 40 relationships          	â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ Application layer loop prevention filtering (filter out 5 duplicate edges)
           â”œâ”€ Accumulated results: 70 + 35 = 105
           â”œâ”€ Check: 105 &gt;= 100 âœ… Limit satisfied!
           â”‚
           â””â”€ Return all_results[:100]
</code></pre>

<h3 id="features"><span class="me-2">Features</span><a href="#features" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<h4 id="intelligent-memory-management"><span class="me-2"><font style="color:rgb(62, 62, 62);">Intelligent Memory Management</font></span><a href="#intelligent-memory-management" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p>Through time decay, importance assessment, and spaced repetition mechanisms, like human memory, implementing adaptive forgetting mechanisms to prevent information overload.</p>

<font style="color:rgb(62, 62, 62);"></font>

<font style="color:rgb(62, 62, 62);">Algorithm Foundation:</font>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__latex/da72504d1dbc9ecc988ebfa0d1a7b4eb.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__latex/da72504d1dbc9ecc988ebfa0d1a7b4eb.svg" alt="image" loading="lazy"></a></p>

<p>Where:</p>

<ul>
  <li>R: Memory Retention Rate, range [0, 1]</li>
  <li>t: Time elapsed, unit: hours</li>
  <li>S: Memory Strength, determined by decay_rate<font style="color:rgb(62, 62, 62);"></font></li>
</ul>

<p><strong>Memory Addition Process</strong></p>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/46230a4bf8a3f429e2333c60086496b6.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/46230a4bf8a3f429e2333c60086496b6.svg" alt="" loading="lazy"></a></p>

<p><strong>Memory Access Process</strong></p>

<p><a href="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/e1bd1899233317918c812351cb3ede8e.svg" class="popup img-link shimmer"><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/e1bd1899233317918c812351cb3ede8e.svg" alt="" loading="lazy"></a></p>

<p>Memory Metadata Structure</p>

<div class="language-json highlighter-rouge"><div class="code-header">
        <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"intelligence"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"importance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="p">,</span><span class="w">           </span><span class="err">#</span><span class="w"> </span><span class="err">Importance</span><span class="w"> </span><span class="err">score</span><span class="w">
        </span><span class="nl">"memory_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long_term"</span><span class="p">,</span><span class="w">         </span><span class="err">#</span><span class="w"> </span><span class="err">Memory</span><span class="w"> </span><span class="err">type</span><span class="w">
        </span><span class="nl">"initial_retention"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="p">,</span><span class="w">          </span><span class="err">#</span><span class="w"> </span><span class="err">Initial</span><span class="w"> </span><span class="err">retention</span><span class="w"> </span><span class="err">rate</span><span class="w">
        </span><span class="nl">"decay_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">                  </span><span class="err">#</span><span class="w"> </span><span class="err">Decay</span><span class="w"> </span><span class="err">rate</span><span class="w">
        </span><span class="nl">"current_retention"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.72</span><span class="p">,</span><span class="w">          </span><span class="err">#</span><span class="w"> </span><span class="err">Current</span><span class="w"> </span><span class="err">retention</span><span class="w"> </span><span class="err">rate</span><span class="w">
        </span><span class="nl">"next_review"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-02T10:00:00"</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">Next</span><span class="w"> </span><span class="err">review</span><span class="w"> </span><span class="err">time</span><span class="p">,</span><span class="w"> </span><span class="err">review</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="s2">"reset"</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">forgetting</span><span class="w"> </span><span class="err">curve</span><span class="p">,</span><span class="w"> </span><span class="err">restarting</span><span class="w"> </span><span class="err">decay</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">review</span><span class="w"> </span><span class="err">time</span><span class="w"> </span><span class="err">point</span><span class="w">
        </span><span class="nl">"review_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">           </span><span class="err">#</span><span class="w"> </span><span class="err">Review</span><span class="w"> </span><span class="err">schedule</span><span class="w">
        </span><span class="nl">"last_reviewed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-01T10:00:00"</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">Last</span><span class="w"> </span><span class="err">reviewed</span><span class="w"> </span><span class="err">time</span><span class="w">
        </span><span class="nl">"review_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">                  </span><span class="err">#</span><span class="w"> </span><span class="err">Review</span><span class="w"> </span><span class="err">count</span><span class="w">
        </span><span class="nl">"access_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">                  </span><span class="err">#</span><span class="w"> </span><span class="err">Access</span><span class="w"> </span><span class="err">count</span><span class="w">
        </span><span class="nl">"reinforcement_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">         </span><span class="err">#</span><span class="w"> </span><span class="err">Reinforcement</span><span class="w"> </span><span class="err">factor</span><span class="p">,</span><span class="w"> </span><span class="err">adjusts</span><span class="w"> </span><span class="err">retention</span><span class="w"> </span><span class="err">rate</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"memory_management"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"should_promote"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">            </span><span class="err">#</span><span class="w"> </span><span class="err">Whether</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">promote</span><span class="w">
        </span><span class="nl">"should_forget"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">             </span><span class="err">#</span><span class="w"> </span><span class="err">Whether</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">forget</span><span class="w">
        </span><span class="nl">"should_archive"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">            </span><span class="err">#</span><span class="w"> </span><span class="err">Whether</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">archive</span><span class="w">
        </span><span class="nl">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="w">                   </span><span class="err">#</span><span class="w"> </span><span class="err">Whether</span><span class="w"> </span><span class="err">active</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-01T10:00:00"</span><span class="p">,</span><span class="w">   </span><span class="err">#</span><span class="w"> </span><span class="err">Created</span><span class="w"> </span><span class="err">at</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-01T15:00:00"</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="err">Updated</span><span class="w"> </span><span class="err">at</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div>

<h1 id="references"><font style="color:rgb(62, 62, 62);">References</font></h1>
<ol>
  <li><a href="https://arxiv.org/abs/2309.07864">ã€ŠThe Rise and Potential of Large Language Model Based Agents: A Surveyã€‹</a></li>
  <li><a href="https://arxiv.org/abs/2307.03172">ã€ŠLost in the Middle: How Language Models Use Long Contextsã€‹</a></li>
</ol>


  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    

    <!-- tags -->
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Ai%20Memory%20-%20Evenss%20AI%20Blog&url=https%3A%2F%2Fevenss.github.io%2Fposts%2Fai-memory%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Ai%20Memory%20-%20Evenss%20AI%20Blog&u=https%3A%2F%2Fevenss.github.io%2Fposts%2Fai-memory%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fevenss.github.io%2Fposts%2Fai-memory%2F&text=Ai%20Memory%20-%20Evenss%20AI%20Blog" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ai-memory/">Ai Memory</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->


















            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->


























            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Older">
      <p>-</p>
    </div>
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Newer">
      <p>-</p>
    </div>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>Â©
    <time>2025</time>

    
      <a href="https://github.com/evenss">oneLineEven</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.4.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->


















    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->


    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{content}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

